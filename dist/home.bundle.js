(()=>{const e=document.getElementById("form"),t=document.getElementById("query");window.addEventListener("load",(function(e){(async()=>{const e=await fetch("https://character-database.becode.xyz/characters"),t=await e.json().catch(console.error);for(let e=0;e<t.length;e++){const a=document.createElement("div");a.setAttribute("id","div"+e),a.setAttribute("class","div_test"),document.getElementById("list_char").appendChild(a);const n=document.createElement("img");n.setAttribute("id","pImg"+e),n.setAttribute("src","data:image/png;base64,"+t[e].image),n.setAttribute("class","main_img"),document.getElementById("div"+e).appendChild(n);const c=document.createElement("p");c.setAttribute("id","pName"+e),c.setAttribute("class","p_test_name"),document.getElementById("div"+e).appendChild(c),document.getElementById("pName"+e).innerHTML=t[e].name;const d=document.createElement("p");d.setAttribute("id","pDesc"+e),d.setAttribute("class","p_test_desc"),document.getElementById("div"+e).appendChild(d),document.getElementById("pDesc"+e).innerHTML=t[e].shortDescription;const s=document.createElement("a");s.setAttribute("id","aBtn"+e),s.setAttribute("class","p_test_btn"),s.setAttribute("href","yooooo"),document.getElementById("div"+e).appendChild(s),document.getElementById("aBtn"+e).innerHTML="Learn More";const i="http://127.0.0.1:5500/";s.addEventListener("click",(function(a){a.preventDefault();const n=i+t[e].name;window.open(n,"_self").document.write("<!DOCTYPE html><html><head><title>"+t[0].name+'</title><script type="module" src="./dist/home.bundle.js"><\/script><link rel="stylesheet" href="./src/css/index.min.css" /></head><body class="body_index"> <header class="header_index"> <div class="buttons"> <form id="form" role="search"> <input type="search" id="query" name="q" placeholder="Search character..." aria-label="Search through site content"/> <button id="btn_search" class="button_search"> <svg viewBox="0 0 1024 1024"> <path class="path1" d="M848.471 928l-263.059-263.059c-48.941 36.706-110.118 55.059-177.412 55.059-171.294 0-312-140.706-312-312s140.706-312 312-312c171.294 0 312 140.706 312 312 0 67.294-24.471 128.471-55.059 177.412l263.059 263.059-79.529 79.529zM189.623 408.078c0 121.364 97.091 218.455 218.455 218.455s218.455-97.091 218.455-218.455c0-121.364-103.159-218.455-218.455-218.455-121.364 0-218.455 97.091-218.455 218.455z"> </path> </svg> </button> </form> <button id="btn_add" class="button_add"> <a href="./pageAjt.html">Add new character</a></button> <button id="btn_add" class="button_add"> <a href="./modif.html">Modifie character</a></button> </div><div class="title"> <a href="./index.html">Character Manager</a> </div></header><main class="main_char"><div class="main_char_div" id="main_char_div"><h1 href="#" class="h1_char" id="h1_char">'+t[0].name+"</h1></div></main><footer></footer></body></html>"),document.getElementById("h1_char").innerHTML=t[e].name;const c=document.createElement("img");c.setAttribute("id","pImg"),c.setAttribute("src","data:image/png;base64,"+t[e].image),c.setAttribute("class","img_char"),document.getElementById("main_char_div").appendChild(c);const d=document.createElement("p");d.setAttribute("id","pName"),d.setAttribute("class","p_char_desc"),document.getElementById("main_char_div").appendChild(d),document.getElementById("pName").innerHTML=t[e].description;const s=document.createElement("input");s.setAttribute("id","aBtnChar"+e),s.setAttribute("class","p_test_btn_c"),s.setAttribute("type","button"),s.setAttribute("value","delete character"),document.getElementById("main_char_div").appendChild(s),s.addEventListener("click",(function(){(async()=>{await fetch("https://character-database.becode.xyz/characters/"+t[e].id,{method:"DELETE"})})(),alert("This character has been deleted"),document.location.reload(!0)}))}))}})()})),e.addEventListener("submit",(async e=>{e.preventDefault();const a="http://127.0.0.1:5500/"+t.value,n=await fetch("https://character-database.becode.xyz/characters?name="+t.value),c=await n.json().catch(console.error);window.open(a,"_self").document.write("<!DOCTYPE html><html><head><title>"+c[0].name+'</title><script type="module" src="./dist/home.bundle.js"><\/script><link rel="stylesheet" href="./src/css/index.min.css" /></head><body class="body_index"> <header class="header_index"> <div class="buttons"> <form id="form" role="search"> <input type="search" id="query" name="q" placeholder="Search character..." aria-label="Search through site content"/> <button id="btn_search" class="button_search"> <svg viewBox="0 0 1024 1024"> <path class="path1" d="M848.471 928l-263.059-263.059c-48.941 36.706-110.118 55.059-177.412 55.059-171.294 0-312-140.706-312-312s140.706-312 312-312c171.294 0 312 140.706 312 312 0 67.294-24.471 128.471-55.059 177.412l263.059 263.059-79.529 79.529zM189.623 408.078c0 121.364 97.091 218.455 218.455 218.455s218.455-97.091 218.455-218.455c0-121.364-103.159-218.455-218.455-218.455-121.364 0-218.455 97.091-218.455 218.455z"> </path> </svg> </button> </form> <button id="btn_add" class="button_add"> <a href="./pageAjt.html">Add new character</a></button> <button id="btn_add" class="button_add"> <a href="./modif.html">Modifie character</a></button> </div><div class="title"> <a href="./index.html">Character Manager</a> </div></header><main class="main_char"><div class="main_char_div" id="main_char_div"><h1 href="#" class="h1_char" id="h1_char">'+c[0].name+"</h1></div></main><footer></footer></body></html>"),document.getElementById("h1_char").innerHTML=c[0].name;const d=document.createElement("img");d.setAttribute("id","pImg"),d.setAttribute("src","data:image/png;base64,"+c[0].image),d.setAttribute("class","img_char"),document.getElementById("main_char_div").appendChild(d);const s=document.createElement("p");s.setAttribute("id","pName"),s.setAttribute("class","p_char_desc"),document.getElementById("main_char_div").appendChild(s),document.getElementById("pName").innerHTML=c[0].description;const r=document.createElement("input");r.setAttribute("id","aBtnChar"+i),r.setAttribute("class","p_test_btn_c"),r.setAttribute("type","button"),r.setAttribute("value","delete character"),document.getElementById("main_char_div").appendChild(r),r.addEventListener("click",(function(){(async()=>{await fetch("https://character-database.becode.xyz/characters/"+c[0].id,{method:"DELETE"})})(),alert("This character has been deleted"),document.location.reload(!0)})),console.log(c)}))})();