(()=>{const e=document.getElementById("character_selection");e.addEventListener("change",(async()=>{console.log(e.value);const t=await fetch("https://character-database.becode.xyz/characters/"+e.value),n=await t.json().catch(console.error);console.log(n);const a=document.getElementById("input_main_ajt_name"),o=document.getElementById("img_main_ajt"),c=document.getElementById("input_main_ajt_dscS"),i=document.getElementById("input_main_ajt_dscL");document.getElementById("pImg").setAttribute("src","data:image/png;base64,"+n.image),a.setAttribute("value",n.name),c.setAttribute("value",n.shortDescription),i.innerHTML=n.description,o.setAttribute("value",n.name)}));window.addEventListener("load",(()=>{(async()=>{const e=await fetch("https://character-database.becode.xyz/characters"),t=await e.json().catch(console.error);for(let e=0;e<t.length;e++){console.log(t[e].name),console.log(t[e].id);const n=document.createElement("option");n.setAttribute("id","option"+e),n.setAttribute("class","option_name"),n.setAttribute("value",t[e].id),document.getElementById("character_selection").appendChild(n),document.getElementById("option"+e).innerHTML=t[e].name}})()})),document.getElementById("btn_ajt").addEventListener("click",(function(e){(async()=>{const e=document.getElementById("input_main_ajt_name").value,t=(document.getElementById("img_main_ajt").files[0],document.getElementById("input_main_ajt_dscS").value),n=document.getElementById("input_main_ajt_dscL").value;!async function(){const a=document.querySelector("#img_main_ajt").files[0],o=await(e=>new Promise(((t,n)=>{const a=new FileReader;a.readAsDataURL(e),a.onload=()=>t(a.result),a.onerror=e=>n(e)})))(a);var c={name:e,shortDescription:t,description:n,image:o.replace(/^data:image\/[a-z]+;base64,/,"")};console.log(c);var i=JSON.stringify(c);console.log(i);const s=document.getElementById("character_selection");(async()=>{await fetch("https://character-database.becode.xyz/characters/"+s.value,{method:"PUT",headers:{"Content-Type":"application/json"},body:i})})()}()})(),1==confirm("Are you sure to modify this character ?")?setTimeout((function(){window.location="http://127.0.0.1:5500/"}),2e3):location.reload(!0)})),document.getElementById("img_main_ajt").addEventListener("change",(()=>{const e=document.querySelector("#img_main_ajt").files[0];document.getElementById("name_img_p").innerHTML=e.name,async function(){const e=document.querySelector("#img_main_ajt").files[0],t=await(e=>new Promise(((t,n)=>{const a=new FileReader;a.readAsDataURL(e),a.onload=()=>t(a.result),a.onerror=e=>n(e)})))(e);document.getElementById("pImg").setAttribute("src",t)}()}))})();